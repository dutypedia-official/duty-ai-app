import React, { useState } from "react";
import { View, StyleSheet } from "react-native";
import PagerView from "react-native-pager-view";
import { Text, BottomNavigation } from "react-native-paper";
import DiscoverScreen from "./discover";
import SettingScreen from "./setting";
import { Ionicons } from "@expo/vector-icons";

export default function MyComponent() {
  const [currentPage, setCurrentPage] = useState(0); // Current tab index

  const tabs = [
    { name: "Home", icon: "home", component: DiscoverScreen },
    { name: "Settings", icon: "cog", component: SettingScreen },
  ];

  return (
    <View style={{ flex: 1 }}>
      {/* Swipeable Pager View */}
      <PagerView
        style={{ flex: 1 }}
        initialPage={0}
        onPageSelected={(e) => setCurrentPage(e.nativeEvent.position)}>
        {tabs.map((tab, index) => (
          <View key={index} style={{ flex: 1 }}>
            <tab.component />
          </View>
        ))}
      </PagerView>

      {/* Bottom Tab Navigation */}
      <BottomNavigation.Bar
        navigationState={{ index: currentPage, routes: tabs }}
        onTabPress={({ route, preventDefault }: any) => {
          const index = tabs.findIndex((tab) => tab.name === route?.name);
          if (index === currentPage) {
            preventDefault();
          } else {
            setCurrentPage(index);
          }
        }}
        renderIcon={({ route, focused, color }: any) => {
          const tab = tabs.find((tab) => tab.name === route.name);
          return <Ionicons name="home-outline" size={24} color={color} />;
        }}
        getLabelText={({ route }) => route.name}
      />
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: "center",
    alignItems: "center",
  },
});
